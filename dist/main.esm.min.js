var e=function(e){return"function"==typeof e},t=0;export default function(n,r,o,i){var u={},c={},a=e(i)?i:function(){};e(r)?a=r:u=r||{},e(o)?a=o:c=o||{},c.param=c.param||"callback",c.timeout=c.timeout||6e4,c.prefix=c.prefix||"__jp",c.name=c.name||""+c.prefix+t++,u[c.param]=c.name;var m,f=Object.keys(u).reduce((function(e,t){var n=u[t];return e+"&"+t+"="+encodeURIComponent(n)}),""),l=(m="?",(-1===n.indexOf(m)?n+"?":n+"&")+f);l=l.replace(/(\?&)/,"?").replace(/&&/,"&"),window[c.name]=function(e){s(null,e)};var p=null,d=document.createElement("script"),s=function(e,t){a(e,t),e&&s.reject&&s.reject(e),!e&&s.resolve&&s.resolve(t),p&&clearTimeout(p),window[c.name]=null,document.body.removeChild(d)};if("number"==typeof c.timeout&&c.timeout>0&&(p=setTimeout((function(){s(new Error("request timeout"))}),c.timeout)),d.src=l,d.onerror=function(){s(new Error("Failed to create script tag. The current SRC is:"+l))},document.body.appendChild(d),"function"==typeof Promise&&Promise.resolve().then)return new Promise((function(e,t){s.resolve=e,s.reject=t}))}
//# sourceMappingURL=main.esm.min.js.map
