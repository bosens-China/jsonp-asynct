var n=0,e=function(e){return void 0===e&&(e="__special"),""+e+n++},r=function(n,r,t){var o=this,i=function(n){var e=n.indexOf("?")+1,r={};if(!e)return{url:n,params:r};for(var t=0,o=n.slice(e).split("&");t<o.length;t++){var i=o[t].split("="),a=i[0],c=i[1];r[a]=c}return{url:n.slice(0,e-1),params:r}}(n),a=i.params,c=i.url;n=c,r||(r={}),"function"==typeof r&&(t=r,r={});var u,l=r.name,f=void 0===l?"callback":l,s=r.timeout,p=void 0===s?1e4:s,d=r.params,v=void 0===d?{}:d,m=function(n){for(var r=e(n);window[r];)r=e(n);return r}(r.prefix);window[m]=function(n){b(),"function"==typeof t&&t.call(o,null,n)},v[f]=m,a=Object.assign(a,v),"number"==typeof p&&(u=setTimeout((function(){b(),"function"==typeof t&&t.call(o,new Error("Task timeout"))}),p));var w=document.createElement("script"),y=encodeURI(""+n+function(n){var e="";for(var r in n=n||{}){if(n.hasOwnProperty(r))e+=r+"="+n[r]+"&"}return e.length&&(e="?"+e.slice(0,-1)),e}(a));function b(){w.parentElement&&w.parentElement.removeChild(w),u&&clearTimeout(u),window[m]=function(){}}return w.src=y,w.onerror=function(){b(),"function"==typeof t&&t.call(o,new Error("Failed to create jsonp, request target address is:"+n))},document.body.appendChild(w),b};"function"!=typeof Object.assign&&(Object.assign=function(n,e){if(null==n)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(n),t=1;t<arguments.length;t++){var o=arguments[t];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}return r});var t=function(n,e){var t,o=new Promise((function(o,i){t=r(n,e,(function(n,e){return n?i(n):o(e)}))}));return{cancel:t,promise:o}};export default t;export{r as callback,t as get};
//# sourceMappingURL=main.esm.min.js.map
