"use strict";var e=function(e){return"function"==typeof e},t=0;module.exports=function(r,n,o,i){var u={},c={},m=e(i)?i:function(){};e(n)?m=n:u=n||{},e(o)?m=o:c=o||{},c.param=c.param||"callback",c.timeout=c.timeout||6e4,c.prefix=c.prefix||"__jp",c.name=c.name||""+c.prefix+t++,u[c.param]=c.name;var a,l=Object.keys(u).reduce((function(e,t){var r=u[t];return e+"&"+t+"="+encodeURIComponent(r)}),""),f=(a="?",(-1===r.indexOf(a)?r+"?":r+"&")+l);f=f.replace(/(\?&)/,"?").replace(/&&/,"&"),window[c.name]=function(e){d(null,e)};var p=null,s=document.createElement("script"),d=function(e,t){m(e,t),e&&d.reject&&d.reject(e),!e&&d.resolve&&d.resolve(t),p&&clearTimeout(p),window[c.name]=null,document.body.removeChild(s)};if("number"==typeof c.timeout&&c.timeout>0&&(p=setTimeout((function(){d(new Error("request timeout"))}),c.timeout)),s.src=f,s.onerror=function(){d(new Error("Failed to create script tag. The current SRC is:"+f))},document.body.appendChild(s),"function"==typeof Promise&&Promise.resolve().then)return new Promise((function(e,t){d.resolve=e,d.reject=t}))};
//# sourceMappingURL=main.min.js.map
